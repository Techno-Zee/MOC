<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>GridStack Native Demo</title>

  <!-- GridStack CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/gridstack@10.1.2/dist/gridstack.min.css"
    rel="stylesheet"
  />

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      padding: 20px;
    }

    .grid-stack-item-content {
      background: #ffffff;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
    }

    button {
      margin-bottom: 12px;
    }
  </style>
</head>
<body>

  <h2>Dynamic Dashboard (GridStack Native)</h2>

  <button onclick="addWidget()">âž• Add Widget</button>
  <button onclick="logLayout()">ðŸ’¾ Log Layout</button>

  <div class="grid-stack"></div>

  <!-- GridStack JS -->
  <script src="https://cdn.jsdelivr.net/npm/gridstack@10.1.2/dist/gridstack-all.js"></script>

  <script>
    // Init GridStack
    const grid = GridStack.init({
      cellHeight: 80,
      margin: 10,
      float: true,
      resizable: {
        handles: 'e, se, s, sw, w'
      }
    });

    // Initial widgets
    grid.addWidget({
      x: 0, y: 0, w: 4, h: 2,
      content: '<div class="grid-stack-item-content">Widget A</div>'
    });

    grid.addWidget({
      x: 4, y: 0, w: 4, h: 3,
      content: '<div class="grid-stack-item-content">Widget B</div>'
    });

    grid.addWidget({
      x: 8, y: 0, w: 4, h: 2,
      content: '<div class="grid-stack-item-content">Widget C</div>'
    });

    // Add widget dynamically
    let counter = 1;
    function addWidget() {
      grid.addWidget({
        w: 3,
        h: 2,
        content: `<div class="grid-stack-item-content">New ${counter++}</div>`
      });
    }

    // Get layout state (important for backend save)
    function logLayout() {
      const layout = grid.save();
      console.log('Layout state:', layout);
    }
  </script>

</body>
</html>
